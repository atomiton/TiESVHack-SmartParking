<Macro Name="createOperator">
    <Argument>
		<LotID1></LotID1>
		<LotID2></LotID2>
		<OperatorID></OperatorID>
	</Argument>
    
    <Result>
	
		<executeQuery>
			<QueryString>
				<Query>
					<Find>
						<ParkingLot>
							<LotID eq="[:$Macro.Argument.LotID1:]" />
						</ParkingLot>
					</Find>
				</Query>
			</QueryString>
		</executeQuery>
		<SetProcessData>
			<Key>Lot1Lat</Key>
			<Value>[:$Response.Message.Value.Find.Result.ParkingLot.LotLocation.Latitude:]</Value>
		</SetProcessData><SetProcessData>
			<Key>Lot1Lon</Key>
			<Value>[:$Response.Message.Value.Find.Result.ParkingLot.LotLocation.Longitude:]</Value>
		</SetProcessData>
		
		<executeQuery>
			<QueryString>
				<Query>
					<Find>
						<ParkingLot>
							<LotID eq="[:$Macro.Argument.LotID2:]" />
						</ParkingLot>
					</Find>
				</Query>
			</QueryString>
		</executeQuery>
		<SetProcessData>
			<Key>Lot2Lat</Key>
			<Value>[:$Response.Message.Value.Find.Result.ParkingLot.LotLocation.Latitude:]</Value>
		</SetProcessData><SetProcessData>
			<Key>Lot2Lon</Key>
			<Value>[:$Response.Message.Value.Find.Result.ParkingLot.LotLocation.Longitude:]</Value>
		</SetProcessData>
        
		<executeQuery>
			<QueryString>
				<Query>
					<Create>
						 <ParkingLotOperator>
							<OperatorID>[:$Macro.Argument.OperatorID:]</OperatorID>
							<OperatorAppID>[:$Macro.Argument.OperatorID:]App</OperatorAppID>
							<DayRevenue>0</DayRevenue>
							<LotOnePrice>0</LotOnePrice>
							<LotTwoPrice>0</LotTwoPrice>
							<LotID1>[:$Macro.Argument.LotID1:]</LotID1>
							<LotID2>[:$Macro.Argument.LotID2:]</LotID2>
							<TotalRevenue>0</TotalRevenue>
							<AuthorizedOperator></AuthorizedOperator>
							<LoyaltyCredit>0</LoyaltyCredit>
						</ParkingLotOperator>
					</Create>
					<Create>
						<OperatorApp>
							<OperatorID>[:$Macro.Argument.OperatorID:]</OperatorID>
							<OperatorAppID>[:$Macro.Argument.OperatorID:]App</OperatorAppID>
							<DriverID></DriverID>
							<AppRating>0</AppRating>
							<LotID>[:$Macro.Argument.LotID1:]</LotID>
							<TodaysPrice>0</TodaysPrice>
							<CurrentVacancies></CurrentVacancies>
							<ReservationOffered>true</ReservationOffered>
							<ReservationPrice>0</ReservationPrice>
							<OperatorAppValue>0</OperatorAppValue>
							<LotLocation>
								<Latitude>[:$ProcessData.Lot1Lat:]</Latitude>
								<Longitude>[:$ProcessData.Lot1Lon:]</Longitude>
							</LotLocation>
						</OperatorApp>
					</Create>
					<Create>
						<OperatorApp>
							<OperatorID>[:$Macro.Argument.OperatorID:]</OperatorID>
							<OperatorAppID>[:$Macro.Argument.OperatorID:]App</OperatorAppID>
							<DriverID></DriverID>
							<AppRating>0</AppRating>
							<LotID>[:$Macro.Argument.LotID2:]</LotID>
							<TodaysPrice>0</TodaysPrice>
							<CurrentVacancies></CurrentVacancies>
							<ReservationOffered>true</ReservationOffered>
							<ReservationPrice>0</ReservationPrice>
							<OperatorAppValue>0</OperatorAppValue>
							<LotLocation>
								<Latitude>[:$ProcessData.Lot1Lat:]</Latitude>
								<Longitude>[:$ProcessData.Lot1Lon:]</Longitude>
							</LotLocation>
						</OperatorApp>
					</Create>
					<Create>
						<CityParkingApp>
							<OperatorID>[:$Macro.Argument.OperatorID:]</OperatorID>
							<LotID>[:$Macro.Argument.LotID1:]</LotID>
							<TodaysPrice>0</TodaysPrice>
							<CurrentVacancies></CurrentVacancies>
							<OperatorReputation>0</OperatorReputation>
							<LotLocation>
								<Latitude>[:$ProcessData.Lot1Lat:]</Latitude>
								<Longitude>[:$ProcessData.Lot1Lon:]</Longitude>
							</LotLocation>
						</CityParkingApp>
					</Create>
					<Create>
						<CityParkingApp>
							<OperatorID>[:$Macro.Argument.OperatorID:]</OperatorID>
							<LotID>[:$Macro.Argument.LotID2:]</LotID>
							<TodaysPrice>0</TodaysPrice>
							<CurrentVacancies></CurrentVacancies>
							<OperatorReputation>0</OperatorReputation>
							<LotLocation>
								<Latitude>[:$ProcessData.Lot1Lat:]</Latitude>
								<Longitude>[:$ProcessData.Lot1Lon:]</Longitude>
							</LotLocation>
						</CityParkingApp>
					</Create>
				</Query>
			</QueryString>
		</executeQuery>
    </Result>
</Macro>